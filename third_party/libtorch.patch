From 4c7f48f0d8da109b700a26fabc5b0f0ce7021778 Mon Sep 17 00:00:00 2001
From: Cemlyn <cemlynwaters@gmail.com>
Date: Sun, 6 Oct 2024 16:09:47 +0100
Subject: [PATCH] BUILD & MODULE.bazel

---
 BUILD        | 49 +++++++++++++++++++++++++++++++++++++++++++++++
 MODULE.bazel |  0
 2 files changed, 54 insertions(+)
 create mode 100644 BUILD
 create mode 100644 MODULE.bazel

diff --git BUILD BUILD
new file mode 100644
index 0000000..8493be3
--- /dev/null
+++ BUILD
@@ -0,0 +1,49 @@
+package(
+    default_visibility = ["//visibility:public"],
+)
+
+cc_binary(
+    name = "main",
+    srcs = ["main.cc"],
+    deps = [
+        ":omp",
+        ":torch",
+    ],
+)
+
+cc_import(
+    name = "c10",
+    hdrs = glob(["include/c10/**"]),
+    includes = ["include"],
+    shared_library = "lib/libc10.dylib",
+)
+
+cc_import(
+    name = "torch",
+    shared_library = "lib/libtorch.dylib",
+    deps = [
+        ":torch_cpu",
+    ],
+)
+
+cc_library(
+    name = "torch_cpu",
+    srcs = ["lib/libtorch_cpu.dylib"],
+    hdrs = glob([
+        "include/torch/**",
+        "include/ATen/**",
+    ]),
+    includes = [
+        "include",
+        "include/torch/csrc/api/include",
+    ],
+    deps = [
+        ":c10",
+        ":omp",
+    ],
+)
+
+cc_import(
+    name = "omp",
+    shared_library = "lib/libomp.dylib",
+)
diff --git MODULE.bazel MODULE.bazel
new file mode 100644
index 0000000..e69de29
--- /dev/null
+++ MODULE.bazel
@@ -0,0 +1 @@
+module(name = "libtorch")
-- 
2.39.5 (Apple Git-154)

